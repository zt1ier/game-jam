(()=>{"use strict";var o={d:(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(o,e)=>Object.prototype.hasOwnProperty.call(o,e)},e={};o.d(e,{Dropbox:()=>Y});var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,e){o.__proto__=e}||function(o,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])},t(o,e)};function n(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var r=function(){return r=Object.assign||function(o){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r]);return o},r.apply(this,arguments)};Object.create;function i(o,e,t){if(t||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return o.concat(n||Array.prototype.slice.call(e))}Object.create;"function"==typeof SuppressedError&&SuppressedError;const s={suffixes:{suffix:{dev:"-$(hostname).dev.corp.dropbox.com",prod:".dropbox.com"},duc_suffix:{dev:"-$(hostname).dev.corp.dropboxusercontent.com",prod:".dropboxusercontent.com"},static_suffix:{dev:"-$(hostname).dev.corp.dropboxstatic.com",prod:".dropboxstatic.com"},api_suffix:{dev:"-$(hostname).dev.corp.dropboxapi.com",prod:".dropboxapi.com"},pp_suffix:{dev:"-pp-$(hostname).dev.corp.dropbox.com",prod:".pp.dropbox.com"}},domains:{DROPBOX_USER_CONTENT_DOMAIN:{dev:"dev.corp.dropboxusercontent.com",prod:"dropboxusercontent.com"},GLOBAL_COOKIE_DOMAIN:{dev:"dev.corp.dropbox.com",prod:"dropbox.com"},DROPBOX_STATIC_DOMAIN:{dev:"dev.corp.dropboxstatic.com",prod:"dropboxstatic.com"},DROPBOX_LEGACY_DOMAIN:{dev:"dev.corp.getdropbox.com",prod:"getdropbox.com"},WEBSERVER:{dev:"meta$(suffix)",prod:"www$(suffix)"},CLIENT_WEB_WEBSERVER:"client-web$(suffix)",PHOTOS_WEBSERVER:"photos$(suffix)",CAROUSEL_WEBSERVER:{dev:"caro$(suffix)",prod:"carousel$(suffix)"},APISERVER:"api$(api_suffix)",APISERVER_V1:"api$(suffix)",API_BLOCK_CLUSTER_V1:"api-content$(suffix)",BEACON_SERVER:"beacon$(suffix)",BOLT_SERVER:"bolt$(suffix)",THUNDER_SERVER:"thunder$(suffix)",BLOCK_CLUSTER:{dev:"block$(suffix)",prod:"dl-web$(suffix)"},PUBSERVER:"dl$(duc_suffix)",DROPBOX_DASH_PROD:"www.dash.ai",DROPBOX_DASH_STAGE:"staging.dash.ai",DROPBOX_DASH_LOCAL:"localhost:3001",DASH_DROPBOX_SUBDOMAIN:"dash.dropbox.com",DROPBOX_DASH_MAIN:"dash.ai",DROPBOX_DASH_STAGE_DROPBOX_WEBFLOW:"dash-staging.dropbox.com",DROPBOX_DASH_SHORT_TERM_WEBFLOW:"dropboxdash.com",DROPBOX_DASH_SHORT_TERM_WEBFLOW_WWW:"www.dropboxdash.com",DROPBOX_DASH_DEMO:"dropbox-mkt.navattic.com",DROPBOX_DASH_DEMO_NEW:"dropbox.navattic.com",DROPBOX_REPLAY_PROD:"replay.dropbox.com",DROPBOX_REPLAY_DEV:"replay-local.dropbox.com",WEB_STATIC_DROPBOX_HOST:"www$(static_suffix)",WEB_STATIC_CLOUDFLARE_CDN_HOST:"cfl$(static_suffix)",MARKETING_WEBSERVER:"marketing$(suffix)",PDF_EDITOR_FRAME:"processing$(duc_suffix)",FILE_IMPORTS_SUBDOMAIN:"file-imports$(suffix)",FUNCAPTCHA_SERVER:{dev:"captcha$(suffix)",prod:"dropboxcaptcha.com"},PAYPAL_SDK_DROPBOX_SERVER:{dev:"paypal-sdk-dropbox$(suffix)",prod:"paypal-sdk-dropbox.com"},HELP_CENTER_WEBSERVER:"help.dropbox.com",HELP_CENTER_WEBSERVER_DEV:"help-stg.dropbox.com",DROPBOX_DEVELOPERS:"developers.dropbox.com",APPLE_APP_STORE_DOMAIN:"itunes.apple.com",GOOGLE_PLAY_DOMAIN:"play.google.com",ADJUST_DOMAIN:"app.adjust.com",ADJUST_TRUE_LINK_DOMAIN:"dbx.go.link",LINKS_DOMAIN:"links$(suffix)",SPRIG_DOMAIN:"a.sprig.com",DROPBOX_ENTERPRISE_SLACK:"dropbox.enterprise.slack.com",REPLAY_SUBDOMAIN:"replay$(suffix)",CAPTURE_SUBDOMAIN:"capture$(suffix)",DROPBOX_CAPTURE_PROD:"capture.dropbox.com",MEDIA_EDIT_SUBDOMAIN:"video$(suffix)",DROPBOX_MEDIA_EDIT_PROD:"video.dropbox.com",EXPERIENCE_WEBSERVER:"experience.dropbox.com",EXPERIENCE_WEBSERVER_DEV:"experience-stg.dropbox.com",DROPBOX_TECH_PROD:"dropbox.tech",DROPBOX_TECH_DEV:"dropbox-stg.tech",DROPBOX_BLOG_PROD:"blog.dropbox.com",DROPBOX_BLOG_DEV:"blog-stg.dropbox.com",DROPBOX_LEARN_PROD:"learn.dropbox.com",EVENTS_SUBDOMAIN:"events.dropbox.com",BRAND_PARTNER_WEBSERVER:"brandpartners.dropbox.com",BRAND_PARTNER_WEBSERVER_DEV:"brandpartners-stg.dropbox.com",LMS_WEBSERVER:"learn.dropbox.com",LMS_WEBSERVER_DEV:"learn-stage.dropbox.com",DOCSEND_DOMAIN:"docsend.com",DOCSEND_PROD:"www.docsend.com",HELLOSIGN_DOMAIN_EN:"www.hellosign.com",HELLOSIGN_APP_PROD:"app.hellosign.com",HELLOSIGN_DEVELOPERS:"developers.hellosign.com",HELLOSIGN_SFDC:"sfdc-docs.hellosign.com",HELLOSIGN_FAQ:"faq.hellosign.com",HELLOSIGN_EMBEDDED:"embedded.hellosign.com",DROPBOX_SIGN_DOMAIN:"sign.dropbox.com",REMOTECURIOUS_DOMAIN:"www.remotely-curious.com",SEAL_DROPBOXAPI:"seal.dropboxapi.com",AMAZON_AWS:"aws.amazon.com",USERRESEARCH_MAIN:"userresearch.dropbox.com",ONEPASSWORD_DOMAIN:"1password.com",RECLAIM_PROD:"www.reclaim.ai",RECLAIM_MAIN:"reclaim.ai",RECLAIM_APP_PROD:"app.reclaim.ai",RECLAIM_APP_MAIN:"www.app.reclaim.ai",DBTT_SERVER:{dev:"short$(suffix)",prod:"db.tt"},DROPBOX_OS_DOMAIN:"os.dropbox.com",DROPBOX_PULSE_DOMAIN:"www.dropboxpulse.com",SERVICES_PP_DOMAIN:"services$(pp_suffix)",CUSTOMERLAB_PP_DOMAIN:{dev:"customerlab$(pp_suffix):8443",prod:"customerlab$(pp_suffix)"},LINUX_SERVER:"linux.dropbox.com",NOTES_WEBSERVER_PROD:"paper.dropbox.com",NOTES_WEBSERVER_OLD:"notes.dropbox.com",NOTES_WEBSERVER_TEST:"test.composer.dropbox.com",NOTES_WEBSERVER_DEV:"notes.dev.corp.dropbox.com",NOTES_WEBSERVER_LOAD:"stage-01.notes.dev.corp.dropbox.com",NOTES_WEBSERVER_STAGE:"stage.notes.dev.corp.dropbox.com",NOTES_WEBSERVER_ADMIN_VPN:"admin-paper.dropbox.com",NOTES_WEBSERVER_NONPROD_1:"nonprod-01-paper.dropbox.com",NOTES_WEBSERVER_NONPROD_2:"nonprod-02-paper.dropbox.com",PAPER_WEBSERVER:"paper$(suffix)",PAPER_ADMIN_PP:"paper-admin$(pp_suffix)",PROF_SHARING_WEBSERVER_PROD:"showcase.dropbox.com",PROF_SHARING_WEBSERVER_PROD_ALIAS:"collections.dropbox.com",PROF_SHARING_WEBSERVER_DEV:"collections.dev.corp.dropbox.com",FORMSWIFT_PROD:"formswift.com",DEVBOX_REDIRECT_HOSTNAME:"redirect-hbwljog9tgkbi2kgxnaue0a9.dropbox.com",DROPBOX_QUALTRICS_PROD:"dropbox.eu.qualtrics.com",RBI_MAIN:"www.rbi.org.in",BUISNESSDOMAIN:"dropboxbusiness.com",FORUM_DOMAIN:"dropboxforum.com",FORUMS_DOMAIN:"dropboxforums.com",FORUM_WWW_DOMAIN:"www.dropboxforum.com",INSIDER_DOMAIN:"dropboxinsiders.com",PARTNER_DOMAIN:"dropboxpartners.com",ADDTODOMAIN:"addtodropbox.com",ZENDESK_DOMAIN:"dropbox.zendesk.com",TEAM_DOMAIN:"dropboxteam.com",DNS_DOMAIN:"dropbox-dns.com",MAIL_DOMAIN:"dropboxmail.com",ARKOSELABS_DOMAIN:"dropbox-api.arkoselabs.com",AEM_WEBSERVER:"aem.dropbox.com",AEM_ASSETS_WEBSERVER:"assets.dropbox.com"},domain_lists:{WEB_STATIC_HOSTS:["www$(static_suffix)","cfl$(static_suffix)"],SAFE_ORIGINS:[{dev:"meta$(suffix)",prod:"www$(suffix)"},"api$(api_suffix)","api$(suffix)",{dev:"caro$(suffix)",prod:"carousel$(suffix)"},"photos$(suffix)","client-web$(suffix)","services$(pp_suffix)","docsend.com","linux.dropbox.com","www.dropbox.com","paper.dropbox.com","notes.dropbox.com","test.composer.dropbox.com","showcase.dropbox.com","collections.dropbox.com",{dev:["localhost"],prod:[]},"help.dropbox.com","help-stg.dropbox.com","developers.dropbox.com","itunes.apple.com","play.google.com","app.adjust.com","dbx.go.link","links$(suffix)","a.sprig.com","dropbox.enterprise.slack.com","replay$(suffix)","capture$(suffix)","video$(suffix)","experience.dropbox.com","experience-stg.dropbox.com","dropbox.tech","dropbox-stg.tech","blog.dropbox.com","blog-stg.dropbox.com","brandpartners.dropbox.com","brandpartners-stg.dropbox.com","learn.dropbox.com","learn-stage.dropbox.com","www.docsend.com","www.hellosign.com","www.remotely-curious.com","capture.dropbox.com","dash.dropbox.com","www.dash.ai","dash.ai","staging.dash.ai","learn.dropbox.com","dash-staging.dropbox.com","dropboxdash.com","www.dropboxdash.com","dropbox-mkt.navattic.com","dropbox.navattic.com","app.hellosign.com","developers.hellosign.com","sfdc-docs.hellosign.com","faq.hellosign.com","embedded.hellosign.com","sign.dropbox.com","seal.dropboxapi.com","aws.amazon.com","userresearch.dropbox.com","www.reclaim.ai","reclaim.ai","app.reclaim.ai","www.app.reclaim.ai","1password.com",{dev:"short$(suffix)",prod:"db.tt"},{dev:"captcha$(suffix)",prod:"dropboxcaptcha.com"},{dev:"dev.corp.dropbox.com",prod:"dropbox.com"},"os.dropbox.com","www.dropboxpulse.com","dropbox.eu.qualtrics.com",{dev:"dev.corp.dropboxstatic.com",prod:"dropboxstatic.com"},{dev:"dev.corp.getdropbox.com",prod:"getdropbox.com"},"dropboxbusiness.com","formswift.com","dropboxforums.com","dropboxforum.com","www.dropboxforum.com","dropboxinsiders.com","dropboxpartners.com","addtodropbox.com","dropbox.zendesk.com","dropboxteam.com","dropbox-dns.com","dropboxmail.com","dropbox-api.arkoselabs.com","aem.dropbox.com","assets.dropbox.com","replay.dropbox.com","video.dropbox.com","www.rbi.org.in","events.dropbox.com"],ADDITIONAL_SAFE_ORIGINS_DEV_OR_OFFICE_IP_ONLY:["redirect-hbwljog9tgkbi2kgxnaue0a9.dropbox.com","notes.dev.corp.dropbox.com","stage-01.notes.dev.corp.dropbox.com","stage.notes.dev.corp.dropbox.com","admin-paper.dropbox.com","nonprod-01-paper.dropbox.com","nonprod-02-paper.dropbox.com","collections.dev.corp.dropbox.com","paper$(suffix)","paper-admin$(pp_suffix)"]}};let a=null,c=null;function p(o){return a===o&&c||(c=function(o){const e=""===o;if(!e&&o.includes(".")&&!o.endsWith(".sb"))throw new Error(`FQDN host names are not supported. Your hostname is '${o}' but we only support barenames like 'dbdev' or 'dima-vm'.\n\nIf you are seeing this in a dropsuite instance, contact #dropsuite as this is likely a problem with instance provisioning.\n\nYou can find instructions on how to change your hostname here: http://askubuntu.com/questions/87665/how-do-i-change-the-hostname-without-a-restart`);return function(o,e,t){const n=t?{hostname:t}:{};if(o.suffixes){const t=d(o.suffixes,e,n);for(const[o,e]of Object.entries(t)){if("string"!=typeof e)throw new Error("Lists in suffix section are not supported");n[o]=e}}let r,i;r=o.domains?d(o.domains,e,n):{};i=o.domain_lists?d(o.domain_lists,e,n):{};return Object.entries(r).forEach((([o,e])=>{if("string"!=typeof e)throw new Error(`Expected string in 'domains', found ${typeof e} for key ${o} instead`)})),Object.entries(i).forEach((([o,e])=>{if(!Array.isArray(e))throw new Error(`Expected list in 'domainLists', found ${typeof e} for key ${o} instead`)})),[r,i]}(s,e,o)}(o),a=o),c}function d(o,e,t){const n={};return Object.entries(o).forEach((([o,r])=>{n[o]=l(o,r,e,t)})),n}function l(o,e,t,n){if(null!=e&&"object"==typeof e&&!Array.isArray(e)){if("dev"in e&&"prod"in e&&"dev,prod"===Object.keys(e).sort().join(","))return l(o,t?e.prod:e.dev,t,n);throw new Error(`Dict value ${e} in key ${o} must have both dev and prod keys`)}if(Array.isArray(e)){const r=[];return e.forEach((e=>{const i=l(o,e,t,n);"string"==typeof i?r.push(i):r.push(...i)})),r}if("string"==typeof e)return function(o,e){return o.replace(/\$\(([^)]+)\)/g,((o,t)=>e[t]))}(e,n);throw new Error(`Unknown value type ${typeof e} found within key ${o}`)}var u,f,m,h=p(""),b=h[0];h[1];function x(o,e){var t=window.screenX+((window.outerWidth||document.documentElement.offsetWidth)-o)/2,n=window.screenY+((window.outerHeight||document.documentElement.offsetHeight)-e)/2;return"width=".concat(o,",height=").concat(e,",left=").concat(t,",top=").concat(n)}function v(o,e,t){var n=-1===o.indexOf("?")?"?":"&";return"".concat(o).concat(n).concat(e,"=").concat(t)}function g(o){return v(o,"version",encodeURIComponent(Dropbox.VERSION))}function w(o,e){var t,n,r=encodeURIComponent(window.location.protocol+"//"+window.location.host),i=encodeURIComponent(Dropbox.appKey),s=Dropbox.productKey?encodeURIComponent(Dropbox.productKey):null,a=encodeURIComponent(o.linkType||""),c=encodeURIComponent(o._trigger||"js"),p=Boolean(o.multiselect),d=encodeURIComponent(D(o.extensions,"join",(function(o){return o.join(" ")}))||""),l=Boolean(o.folderselect);e=Boolean(e);var u="".concat(Dropbox.baseUrl,"/chooser?origin=").concat(r,"&app_key=").concat(i,"&link_type=").concat(a,"&trigger=").concat(c,"&multiselect=").concat(p,"&extensions=").concat(d,"&folderselect=").concat(l,"&iframe=").concat(e);if(void 0!==o.fileselect&&(u=v(u,"fileselect",Boolean(o.fileselect))),void 0!==o.sizeLimit&&(u=v(u,"size_limit",o.sizeLimit)),null!=o.initialNavigation){if(null!=o.initialNavigation.mode)u=v(u,"initial_navigation_mode",encodeURIComponent(o.initialNavigation.mode));if(null!=o.initialNavigation.role)u=v(u,"initial_navigation_role",encodeURIComponent(o.initialNavigation.role));if(o.initialNavigation.cursor)u=v(u,"initial_navigation_cursor",encodeURIComponent(o.initialNavigation.cursor))}null!=o.initialViewType&&(u=v(u,"initial_view_type",encodeURIComponent(o.initialViewType)));null!=o.fields&&(u=v(u,"fields",encodeURIComponent("function"==typeof o.fields.join?o.fields.join(" "):void 0)));(!1===o.showSignOut&&(u=v(u,"show_sign_out","false")),o.initialNavigationPath)&&(u=v(u,"initial_navigation_path",encodeURIComponent(o.initialNavigationPath)));o.requiredPermissions&&(u=v(u,"required_permissions",encodeURIComponent(D(o.requiredPermissions,"join",(function(o){return o.join(" ")}))||"")));(s&&(u=v(u,"product_key",s)),null===(t=o.suggestions)||void 0===t?void 0:t.experimentGroup)&&(u=v(u,"suggestions_experiment_group",encodeURIComponent(null===(n=o.suggestions)||void 0===n?void 0:n.experimentGroup)));return g(u)}function _(){/\bTrident\b/.test(navigator.userAgent)&&null!=document.body&&null==f&&((f=document.createElement("iframe")).setAttribute("id","dropbox_xcomm"),f.setAttribute("src",Dropbox.baseUrl+"/static/api/1/xcomm.html"),f.style.display="none",document.body.appendChild(f))}function E(o){var e={options:r(r({},o),{success:function(t,n){"function"==typeof o.success&&o.success(t,n),m===e&&(m=null)},cancel:function(t){"function"==typeof o.cancel&&o.cancel(t),m===e&&(m=null)}})};return m=e,e}function y(o,e){var t,n=encodeURIComponent(Dropbox.appKey),r="https://".concat(b.APISERVER,"/2/dropins/get_job_status"),i=JSON.stringify({app_key:n,job:e});if(!("withCredentials"in new XMLHttpRequest))throw new Error("Unable to find suitable means of cross domain communication");return t=function(){var e=new XMLHttpRequest;return e.onload=function(){return function(e){var n=e[".tag"];if("complete"===n){if("function"==typeof o.progress&&o.progress(1),"function"==typeof o.success)if(0!==o.success.length&&e.file_ids){var r={fileIds:e.file_ids};o.success(r)}else o.success()}else"pending"===n||"downloading"===n?(null!=e.progress&&"function"==typeof o.progress&&o.progress(e.progress/100),setTimeout(t,1500)):"failed"===n&&"function"==typeof o.error&&o.error(e.error_message)}(JSON.parse(e.responseText))},e.onerror=function(){return"function"==typeof o.error?o.error():void 0},e.open("POST",r,!0),e.setRequestHeader("Content-Type","application/json"),e.send(i)},"function"==typeof o.progress&&o.progress(0),t()}function O(o,e,t){var n,r=JSON.parse(o.data);switch(n=null!=f&&t._popup?f.contentWindow:o.source,void 0!==r.sequence_number&&n.postMessage(JSON.stringify({method:"ack",sequence_number:r.sequence_number}),Dropbox.baseUrl),r.method){case"origin_request":o.source.postMessage(JSON.stringify({method:"origin"}),Dropbox.baseUrl);break;case"ready":if(null!=t.files){var i=void 0;if(t._fetch_url_on_save){for(var s=[],a=0;a<t.files.length;a++){var c=t.files[a];s.push({filename:c.filename})}i=JSON.stringify({method:"files_with_callback",params:s})}else i=JSON.stringify({method:"files",params:t.files});if(n.postMessage(i,Dropbox.baseUrl),null!=t._ews_auth_token){var p=JSON.stringify({method:"ews_auth_token",params:{ews_auth_token:t._ews_auth_token}});n.postMessage(p,Dropbox.baseUrl)}}"function"==typeof t.ready&&t.ready();break;case"files_selected":case"files_saved":"function"==typeof e&&e(),"function"==typeof t.success&&t.success(r.params,u);break;case"cursor_changed":u={cursor:r.params};break;case"progress":"function"==typeof t.progress&&t.progress(r.params);break;case"close_dialog":"function"==typeof e&&e(),"function"==typeof t.cancel&&t.cancel(u);break;case"resize":"function"==typeof t.resize&&t.resize(r.params);break;case"error":"function"==typeof t.error&&t.error(r.params);break;case"error_and_close":"function"==typeof e&&e(),"function"==typeof t.error&&t.error(r.params);break;case"job_id":"function"==typeof e&&e(),y(t,r.params);break;case"save_callback":!function(o,e,t){if(o._fetch_url_on_save){var n=o.fetch_urls_fn;"function"!=typeof n&&"function"==typeof o.error&&o.error("Something went wrong, file url callback not provided."),n(t,e)}}(t,r.params,(function(o){if(null==o)throw new Error("Please supply {urls: [...]} to success callback");if(null!=o.url&&null!=o.urls)throw new Error("Do not pass both url and urls to the save callback");if(null!=o.url&&(o.urls=[o.url]),null==o.urls)throw new Error("Please supply {urls: [...]} to success callback");return r={method:"continue_saving",params:{download_urls:o.urls}},void n.postMessage(JSON.stringify(r),Dropbox.baseUrl)}));break;case"_debug_log":"undefined"!=typeof console&&null!==console&&console.log(r.params.msg);break;case"chooser_extras_changed":Dropbox.chooserExtras=r.params.chooserExtras}}function D(o,e,t){return null!=o&&"function"==typeof o[e]?t(o,e):void 0}function S(){u={},f=null,m=null,null==Dropbox.baseUrl&&(Dropbox.baseUrl="https://".concat(b.WEBSERVER)),null==Dropbox.blockBaseUrl&&(Dropbox.blockBaseUrl="https://".concat(b.BLOCK_CLUSTER)),Dropbox.addListener=function(o,e,t){o.addEventListener?o.addEventListener(e,t,!1):o.attachEvent("on".concat(e),(function(o){return o.preventDefault=function(){return!1},t(o)}))},Dropbox.removeListener=function(o,e,t){o.removeEventListener?o.removeEventListener(e,t,!1):o.detachEvent("on".concat(e),t)},Dropbox.createChooserWidget=function(o){var e=E(o),t=function(o){var e=document.createElement("iframe");return e.src="about:blank",e._postAction=o,e.name="dropbox-dropins",e.style.display="block",e.style.backgroundColor="white",e.style.border="none",e}(w(e.options,!0));return t._handler=function(o){o.source===t.contentWindow&&o.origin===Dropbox.baseUrl&&O(o,null,e.options)},Dropbox.addListener(window,"message",t._handler),t},Dropbox.cleanupWidget=function(o){if(!o._handler)throw new Error("Invalid widget!");Dropbox.removeListener(window,"message",o._handler),delete o._handler}}null==window.Dropbox&&(window.Dropbox={});var R=function(){function o(o,e){var t=this;this.popupWindow=o,this.onClose=e,this.stopInterval=function(){clearInterval(t.intervalId)},this.isWindowClosedByUser=function(){try{return t.popupWindow.closed}catch(o){}return!1},this.messagingWindow=function(){return null!=f?f.contentWindow:t.popupWindow},this.handleInterval=function(){t.isWindowClosedByUser()&&(t.onClose(),t.stopInterval())},this.intervalId=setInterval(this.handleInterval,100)}return o.open=function(e,t,n){var r=x(t.width,t.height),i="".concat(r,",resizable,scrollbars"),s=window.open(e,"_blank",i);if(null===s)throw new Error("Failed to open the window. Dropbox popups may only be attached to a user-triggered event handler such as a tap or click event.");return s.focus(),new o(s,n)},o}(),A=p(""),k=A[0];A[1];function N(o){return function(){for(var e=0,t=o;e<t.length;e++){(0,t[e])()}}}var I="https://".concat(k.WEBSERVER),C=function(){};var P=function(){function o(){var o=this;this.activeDropins=[],this.deleteActiveDropin=function(e){return function(){var t=o.activeDropins.indexOf(e);-1!==t&&o.activeDropins.splice(t,1)}},this.openWindow=function(e){o.throwIfAlreadyActive(e);var t=N([]);try{var n=e.url(),r="".concat(I).concat(n.pathname).concat(n.search),i=R.open(r,e.windowDimensions(),(function(){t()}));t=N([i.stopInterval,t]);var s=o.attach(e,i.messagingWindow);t=N([s,t]),t=N([function(){e.sendMessage({method:"close"})},t]);var a={dropin:e,cleanup:C};o.activeDropins.push(a),t=N([o.deleteActiveDropin(a),t]),e.hasOnCloseDialogMessage()||e.setOnCloseDialogMessage(t),a.cleanup=t}catch(o){throw t(),o}}}return o.prototype.mount=function(o,e){if(!o)throw new Error("Dropbox component must be provided");if(!e)throw new Error("Container element must be provided");this.throwIfAlreadyActive(o);var t=N([]);try{var n=this.createIframe();t=N([this.attach(o,(function(){if(!n.contentWindow)throw new Error("iframe does not contain a contentWindow");return n.contentWindow})),t]);var r=o.url();n.src="".concat(I).concat(r.pathname).concat(r.search,"&iframe=true"),n.scrolling="no",e.appendChild(n),t=N([function(){e.removeChild(n)},t]);var i={dropin:o,cleanup:C};this.activeDropins.push(i),t=N([this.deleteActiveDropin(i),t]),o.hasOnCloseDialogMessage()||o.setOnCloseDialogMessage(t),i.cleanup=t}catch(o){throw t(),o}},o.prototype.remove=function(o){if(!o)throw new Error("Dropbox component must be provided");for(var e=0,t=this.activeDropins;e<t.length;e++){var n=t[e];if(n.dropin===o){n.cleanup();break}}},o.prototype.throwIfAlreadyActive=function(o){for(var e=0,t=this.activeDropins;e<t.length;e++){if(t[e].dropin===o)throw new Error("Component is already in use")}},o.prototype.attach=function(o,e){o.sendMessage=function(o){e().postMessage(JSON.stringify(o),I)};var t=function(t){if(t.source===e()&&t.origin===I){var n;try{n=JSON.parse(t.data)}catch(o){return}(function(o){return"object"==typeof o&&"string"==typeof o.method})(n)&&o.handleMessage(n)}};return window.addEventListener("message",t),function(){o.sendMessage=C,window.removeEventListener("message",t)}},o.prototype.createIframe=function(){var o=window.document.createElement("iframe");return o.style.height="100%",o.style.width="100%",o.style.border="none",o.allowFullscreen=!0,o},o}(),M=function(o){function e(){var t=o.call(this,"Failed to open/load the window. Dropbox.choose and Dropbox.save should only be called from within a user-triggered event handler such as a tap or click event.")||this;return t.name="WindowFailedToOpenError",Object.setPrototypeOf(t,e.prototype),t}return n(e,o),e}(Error),L=["text","documents","images","video","audio"],B={init:function(){}};function T(o,e){null!=e?e.innerHTML="":(e=document.createElement("a")).href="#",e.className+=" dropbox-dropin-btn",Dropbox.isBrowserSupported()?e.className+=" dropbox-dropin-default":e.className+=" dropbox-dropin-disabled";var t=document.createElement("span");return t.className="dropin-btn-status",e.appendChild(t),o=document.createTextNode(o),e.appendChild(o),e}function U(o){return o.replace(/\/+$/g,"").split("/").pop()}function W(o){var e=document.createElement("a");return e.href=o,U(e.pathname)}function $(){var o;S(),null==Dropbox.appKey&&(Dropbox.appKey=null===(o=document.getElementById("dropboxjs"))||void 0===o?void 0:o.getAttribute("data-app-key")),Dropbox.init=function(o){null!=o.appKey&&(Dropbox.appKey=o.appKey),null!=o.productKey&&(Dropbox.productKey=o.productKey)};var e=function(o){var e,t,n;if("string"==typeof o[0])n=o.shift(),e="string"==typeof o[0]?o.shift():W(n),(t=o.shift()||{}).files=[{url:n,filename:e}];else{if(null==(t=o.shift()))throw new Error("Missing arguments. See documentation.");if(!(null!=t.files?t.files.length:void 0)&&"function"!=typeof t.files)throw new Error("Missing files. See documentation.");if(null!=t.fetch_urls_fn){if("function"!=typeof t.fetch_urls_fn)throw new Error("fetch_urls_fn must be a function if supplied.  See documentation.");t._fetch_url_on_save=!0}for(var r=0;r<t.files.length;r++){var i=t.files[r];if("function"==typeof i.url&&(t._fetch_url_on_save=!0,t.fetch_urls_fn=i.url,i.url=null,r>0))throw new Error("Old style url as callback is only supported for single files.");i.filename||(i.filename=W(i.url))}}return t};Dropbox.save=function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];var r=e(o);if(Dropbox.isBrowserSupported()){if(r._popup=!0,"object"!=typeof r.files||!r.files.length)throw new Error("The object passed in must have a 'files' property that contains a list of objects. See documentation.");if(r.iframe&&!r.windowName)throw new Error("Dropbox.save does not yet support creating its own iframe.                       windowName must be provided when the iframe option is present.");for(var i=0,s=r.files;i<s.length;i++){var a=s[i];if(r._fetch_url_on_save){if(r.fetch_urls_fn){if(null!=a.url)throw new Error("You passed in a 'fetch_urls_fn' option to specify the file URLs.  Don't include individual URLs in each file objects.")}else if("function"!=typeof a.url)throw new Error("File urls should be all urls, or a single file with function. See documentation.")}else if("string"!=typeof a.url)throw new Error("File urls to download incorrectly configured. Each file must have a url. See documentation.")}var c,p,d,l=x(735,670);return t((c=r.iframe,p=encodeURIComponent(window.location.protocol+"//"+window.location.host),d=encodeURIComponent(Dropbox.appKey),c=Boolean(c),g("".concat(Dropbox.baseUrl,"/saver?origin=").concat(p,"&app_key=").concat(d,"&iframe=").concat(c))),l,r).window}alert("Your browser does not support the Dropbox Saver")};var t=function(o,e,t){var n=function(){s.closed||(s.close(),s.postMessage(JSON.stringify({method:"close"}),Dropbox.baseUrl)),Dropbox.removeListener(window,"message",r),clearInterval(a)},r=function(o){o.source!==s&&o.source!==(null!=f?f.contentWindow:void 0)||O(o,n,t)},i=t.iframe?"":"".concat(e,",resizable,scrollbars"),s=window.open(o,t.windowName||"dropbox",i);if(!s)throw new M;s.focus();var a=setInterval((function(){(function(){try{return s.closed}catch(o){}})()&&(n(),"function"==typeof t.cancel&&t.cancel(u))}),100);return Dropbox.addListener(window,"message",r),{window:s,onClose:n}},n=function(o){null==o.success&&D(console,"warn",(function(o){return o.warn("You must provide a success callback to the Chooser to see the files that the user selects")})),void 0===o.fileselect||Boolean(o.fileselect)||Boolean(o.folderselect)||D(console,"error",(function(o){return o.error("You must enable either fileselect or folderselect on the Chooser so the user can select something")}));var e=function(){return D(console,"warn",(function(o){return o.warn("The provided list of extensions or file types is not valid. See Chooser documentation: ".concat("https://www.dropbox.com/developers/dropins/chooser/js"))})),D(console,"warn",(function(o){return o.warn("Available file types are: ".concat(L.join(", ")))})),delete o.extensions};if(null!=o.extensions&&null!=Array.isArray)if(Array.isArray(o.extensions))for(var t=0,n=o.extensions;t<n.length;t++){var r=n[t];r.match(/^\.[\.\w$#&+@!()\-'`_~]+$/)||-1!==L.indexOf(r)||e()}else e();return void 0!==o.sizeLimit&&"number"!=typeof o.sizeLimit&&o.sizeLimit<=0&&D(console,"error",(function(o){return o.error("The sizeLimit option, if provided, must be a positive number")})),o},r=function(o){if(Dropbox.isBrowserSupported()){var e,n,r=E(o);if(o.iframe&&!o.windowName){var i=(e=w(o,!0),(n=document.createElement("iframe")).src=e,n.style.display="block",n.style.backgroundColor="white",n.style.border="none",n);i.style.width="735px",i.style.height="552px",i.style.margin="125px auto 0 auto",i.style.border="1px solid #ACACAC",i.style.boxShadow="rgba(0, 0, 0, .2) 0px 4px 16px";var s=document.createElement("div");s.style.position="fixed",s.style.left=s.style.right=s.style.top=s.style.bottom="0",s.style.zIndex="1000",s.style.backgroundColor="rgba(160, 160, 160, 0.2)",s.appendChild(i),document.body.appendChild(s);var a=function(o){o.source===i.contentWindow&&(r.onClose=function(){document.body.removeChild(s),Dropbox.removeListener(window,"message",a)},O(o,r.onClose,r.options))};Dropbox.addListener(window,"message",a)}else{var c=x(735,552);r.onClose=t(w(r.options,r.options.iframe),c,r.options).onClose}}else alert("Your browser does not support the Dropbox Chooser")};Dropbox.choose=function(o){null==o&&(o={}),o=n(o),r(o)},Dropbox.cancelChooser=function(){m&&(m.onClose&&m.onClose(),m.options.cancel&&m.options.cancel(u))},Dropbox.getChooserExtras=function(){var o;return null!==(o=Dropbox.chooserExtras)&&void 0!==o?o:{}};Dropbox.isBrowserSupported=function(){var o=function(){for(var o=0,e=[/IEMobile\/(7|8|9|10)\./,/BB10;/];o<e.length;o++)if(e[o].test(navigator.userAgent))return!1;return"undefined"!=typeof JSON&&null!==JSON&&null!=window.postMessage&&null!=window.addEventListener&&!/MSIE |Trident\/.*rv:11/.test(navigator.userAgent)}();return Dropbox.isBrowserSupported=function(){return o},o},Dropbox.createChooseButton=function(o){null==o&&(o={}),o=n(o);var e=T("Choose from Dropbox");return Dropbox.addListener(e,"click",(function(t){t.preventDefault(),r({success:function(t,n){e.className="dropbox-dropin-btn dropbox-dropin-success","function"==typeof o.success&&o.success(t,n)},cancel:o.cancel,linkType:o.linkType,multiselect:o.multiselect,fileselect:o.fileselect,folderselect:o.folderselect,extensions:o.extensions,sizeLimit:o.sizeLimit,iframe:o.iframe,requiredPermissions:o.requiredPermissions,_trigger:"button"})})),e},Dropbox.createSaveButton=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];var n=e(o),r=o.shift();return r=T("Save to Dropbox",r),Dropbox.addListener(r,"click",(function(o){if(o.preventDefault(),r.className.indexOf("dropbox-dropin-error")>=0||r.className.indexOf("dropbox-dropin-default")>=0||r.className.indexOf("dropbox-dropin-disabled")>=0){var e=("function"==typeof n.files?n.files():void 0)||n.files;if(!(null!=e?e.length:void 0))return r.className="dropbox-dropin-btn dropbox-dropin-error",void("function"==typeof n.error&&n.error("Missing files"));Dropbox.save({files:e,success:function(){r.className="dropbox-dropin-btn dropbox-dropin-success","function"==typeof n.success&&n.success()},progress:function(o){r.className="dropbox-dropin-btn dropbox-dropin-progress","function"==typeof n.progress&&n.progress(o)},cancel:function(){"function"==typeof n.cancel&&n.cancel()},error:function(o){r.className="dropbox-dropin-btn dropbox-dropin-error","function"==typeof n.error&&n.error(o)}})}})),r};var i=function(o,e){return"  background: ".concat(o,";\n  background: -moz-linear-gradient(top, ").concat(o," 0%, ").concat(e," 100%);\n  background: -webkit-linear-gradient(top, ").concat(o," 0%, ").concat(e," 100%);\n  background: linear-gradient(to bottom, ").concat(o," 0%, ").concat(e," 100%);\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='").concat(o,"', endColorstr='").concat(e,"',GradientType=0);  ")},s=document.createElement("style");s.type="text/css";var a='  @-webkit-keyframes rotate {\n    from  { -webkit-transform: rotate(0deg); }\n    to   { -webkit-transform: rotate(360deg); }\n  }\n\n  @keyframes rotate {\n    from  { transform: rotate(0deg); }\n    to   { transform: rotate(360deg); }\n  }\n\n    .dropbox-dropin-btn, .dropbox-dropin-btn:link, .dropbox-dropin-btn:hover {\n      display: inline-block;\n      height: 14px;\n      font-family: "Lucida Grande", "Segoe UI", "Tahoma", "Helvetica Neue", "Helvetica", sans-serif;\n      font-size: 11px;\n      font-weight: 600;\n      color: #636363;\n      text-decoration: none;\n      padding: 1px 7px 5px 3px;\n      border: 1px solid #ebebeb;\n      border-radius: 2px;\n      border-bottom-color: #d4d4d4;\n      '.concat(i("#fcfcfc","#f5f5f5"),"\n    }\n\n    .dropbox-dropin-default:hover, .dropbox-dropin-error:hover {\n      border-color: #dedede;\n      border-bottom-color: #cacaca;\n      ").concat(i("#fdfdfd","#f5f5f5"),"\n    }\n\n    .dropbox-dropin-default:active, .dropbox-dropin-error:active {\n      border-color: #d1d1d1;\n      box-shadow: inset 0 1px 1px rgba(0,0,0,0.1);\n    }\n\n    .dropbox-dropin-btn .dropin-btn-status {\n      display: inline-block;\n      width: 15px;\n      height: 14px;\n      vertical-align: bottom;\n      margin: 0 5px 0 2px;\n      background: transparent url('").concat(Dropbox.baseUrl,"/static/metaserver/static/images/widgets/dbx-saver-status.png') no-repeat;\n      position: relative;\n      top: 2px;\n    }\n\n    .dropbox-dropin-default .dropin-btn-status {\n      background-position: 0px 0px;\n    }\n\n    .dropbox-dropin-progress .dropin-btn-status {\n      width: 18px;\n      margin: 0 4px 0 0;\n      background: url('").concat(Dropbox.baseUrl,"/static/metaserver/static/images/widgets/dbx-progress.png') no-repeat center center;\n        -webkit-animation-name: rotate;\n        -webkit-animation-duration: 1.7s;\n        -webkit-animation-iteration-count: infinite;\n        -webkit-animation-timing-function: linear;\n      animation-name: rotate;\n      animation-duration: 1.7s;\n      animation-iteration-count: infinite;\n      animation-timing-function: linear;\n    }\n\n    .dropbox-dropin-success .dropin-btn-status {\n      background-position: -15px 0px;\n    }\n\n    .dropbox-dropin-disabled {\n      background: #e0e0e0;\n      border: 1px #dadada solid;\n      border-bottom: 1px solid #ccc;\n      box-shadow: none;\n    }\n\n    .dropbox-dropin-disabled .dropin-btn-status {\n      background-position: -30px 0px;\n    }\n\n    .dropbox-dropin-error .dropin-btn-status {\n      background-position: -45px 0px;\n    }\n\n  @media only screen and (-webkit-min-device-pixel-ratio: 1.4) {\n      .dropbox-dropin-btn .dropin-btn-status {\n        background-image: url('").concat(Dropbox.baseUrl,"/static/metaserver/static/images/widgets/dbx-saver-status-2x.png');\n        background-size: 60px 14px;\n          -webkit-background-size: 60px 14px;\n      }\n\n      .dropbox-dropin-progress .dropin-btn-status {\n        background: url('").concat(Dropbox.baseUrl,"/static/metaserver/static/images/widgets/dbx-progress-2x.png') no-repeat center center;\n        background-size: 20px 20px;\n          -webkit-background-size: 20px 20px;\n      }\n  }\n\n    .dropbox-saver:hover, .dropbox-chooser:hover {\n      text-decoration: none;\n      cursor: pointer;\n    }\n\n    .dropbox-chooser, .dropbox-dropin-btn {\n      line-height: 11px !important;\n      text-decoration: none !important;\n      box-sizing: content-box !important;\n        -webkit-box-sizing: content-box !important;\n        -moz-box-sizing: content-box !important;\n    }\n    ");s.styleSheet?s.styleSheet.cssText=a:s.textContent=a,document.getElementsByTagName("head")[0].appendChild(s),setTimeout(_,0);var c=function(){document.removeEventListener?document.removeEventListener("DOMContentLoaded",c,!1):document.detachEvent&&document.detachEvent("onreadystatechange",c),_(),B.init()};"interactive"===document.readyState||"complete"===document.readyState?setTimeout(c,0):document.addEventListener?document.addEventListener("DOMContentLoaded",c,!1):document.attachEvent("onreadystatechange",c)}var V=window.location.protocol+"//"+window.location.host,z=function(){function o(e){if(this.origin=V,this.sendMessage=function(o){},this.state={},this.options=e,!this.options)throw new Error("options must be provided");if(!this.options.appKey)throw new Error("appKey must be provided");o.validateOnError(this.options.onError)}return o.validateOnError=function(o){if(o&&"function"!=typeof o)throw new Error("onError must be a function")},o.prototype.setOnError=function(e){o.validateOnError(e),this.options.onError=e},o.prototype.hasOnCloseDialogMessage=function(){return void 0!==this.onCloseDialogMessage},o.prototype.setOnCloseDialogMessage=function(o){if("function"!=typeof o)throw new Error("onCloseDialogMessage must be a function");this.onCloseDialogMessage=o},o.prototype.sendState=function(){this.sendMessage({method:"state",params:this.state})},o.prototype.url=function(){var o=i([{key:"app_key",value:this.options.appKey},{key:"origin",value:this.origin}],this.urlParams(),!0).map((function(o){return"".concat(encodeURIComponent(o.key),"=").concat(encodeURIComponent(o.value))})).join("&");return{pathname:this.urlPathname(),search:"?".concat(o)}},o.prototype.windowDimensions=function(){return{width:735,height:552}},o.prototype.handleMessage=function(o){switch(void 0!==o.sequenceNumber&&this.sendMessage({method:"ack",sequenceNumber:o.sequenceNumber}),o.method){case"origin_request":this.sendMessage({method:"origin"});break;case"ready":this.sendState();break;case"error":this.options.onError&&this.options.onError(o.params);break;case"close_dialog":this.onCloseDialogMessage&&this.onCloseDialogMessage(),this.onCloseDialogMessage=void 0}},o}(),j=["text","documents","images","video","audio"],F=function(o){function e(e){var t=o.call(this,e)||this;return t.chooserExtras={},t.validateOptions=function(){var o=function(o,e){if(void 0!==t.options[o]&&typeof t.options[o]!==e)throw new Error("The ".concat(o," option, if provided, must have type ").concat(e))};if(o("linkType","string"),o("_trigger","string"),void 0!==t.options.extensions){if(!(t.options.extensions instanceof Array))throw new Error("The extensions option, if provided, must be an array");for(var e=0,n=t.options.extensions;e<n.length;e++){var r=n[e];if("string"!=typeof r||!r.match(/^\.[\.\w$#&+@!()\-'`_~]+$/)&&-1===j.indexOf(r))throw new Error("The provided list of extensions or file types is not valid. "+"See Chooser documentation: ".concat("https://www.dropbox.com/developers/dropins/chooser/js",". ")+"Available file types are: ".concat(j.join(", ")))}}if(o("multiselect","boolean"),o("iframe","boolean"),o("folderselect","boolean"),o("fileselect","boolean"),void 0!==t.options.fileselect&&!t.options.fileselect&&!t.options.folderselect)throw new Error("You must enable either fileselect or folderselect on the Chooser so the user can select something");if(o("sizeLimit","number"),void 0!==t.options.sizeLimit&&t.options.sizeLimit<=0)throw new Error("The sizeLimit option, if provided, must be a positive number");var i=t.options.initialNavigation;if(void 0!==i){if(void 0!==i.mode&&"string"!=typeof i.mode)throw new Error("The initialNavigation.mode option, if provided, must be a string");if(void 0!==i.role&&"string"!=typeof i.role)throw new Error("The initialNavigation.role option, if provided, must be a string");if(void 0!==i.cursor&&"string"!=typeof i.cursor)throw new Error("The initialNavigation.cursor option, if provided, must be a string")}if(o("initialViewType","string"),void 0!==t.options.fields){if(!(t.options.fields instanceof Array))throw new Error("The fields option, if provided, must be an array");for(var s=0,a=t.options.fields;s<a.length;s++){if("string"!=typeof a[s])throw new Error("The fields option, if provided, must be an array of strings")}}o("showSignOut","boolean"),o("version","string"),o("cl","string"),o("productKey","string");var c=t.options.suggestions;if(c){if("object"!=typeof c)throw new Error("The suggestions option, if provided, must be an object");if("string"!=typeof c.experimentGroup)throw new Error("The suggestions.experimentGroup option, if provided, must be a string")}if("function"!=typeof t.options.onSuccess)throw new Error("You must provide a success callback to the Chooser to see the files that the user selects");o("onReady","function"),o("onCancel","function"),o("onError","function"),o("onResize","function")},t.validateOptions(),t}return n(e,o),e.prototype.urlParams=function(){var o,e,t=[],n=function(o,e){void 0!==e&&t.push({key:o,value:"".concat(e)})};return n("link_type",this.options.linkType),t.push({key:"trigger",value:this.options._trigger||"js"}),void 0!==this.options.extensions&&t.push({key:"extensions",value:this.options.extensions.join(" ")}),n("multiselect",this.options.multiselect),n("iframe",this.options.iframe),n("folderselect",this.options.folderselect),n("fileselect",this.options.fileselect),n("size_limit",this.options.sizeLimit),void 0!==this.options.initialNavigation&&(n("initial_navigation_mode",this.options.initialNavigation.mode),n("initial_navigation_role",this.options.initialNavigation.role),n("initial_navigation_cursor",this.options.initialNavigation.cursor)),n("initial_view_type",this.options.initialViewType),void 0!==this.options.fields&&t.push({key:"fields",value:this.options.fields.join(" ")}),n("show_sign_out",this.options.showSignOut),n("version",this.options.version),n("cl",this.options.cl),n("product_key",this.options.productKey),n("suggestions_experiment_group",null===(e=null===(o=this.options)||void 0===o?void 0:o.suggestions)||void 0===e?void 0:e.experimentGroup),t},e.prototype.urlPathname=function(){return"/chooser"},e.prototype.close=function(){"function"==typeof this.onCloseDialogMessage&&this.onCloseDialogMessage()},e.prototype.handleMessage=function(e){switch(o.prototype.handleMessage.call(this,e),e.method){case"ready":void 0!==this.options.onReady&&this.options.onReady();break;case"files_selected":this.close(),this.options.onSuccess(e.params,this.lastNavigation);break;case"cursor_changed":this.lastNavigation={cursor:e.params};break;case"close_dialog":void 0!==this.options.onCancel&&this.options.onCancel(this.lastNavigation);break;case"resize":void 0!==this.options.onResize&&this.options.onResize(e.params);break;case"error":this.close();break;case"_debug_log":void 0!==console&&null!==console&&console.log(e.params.msg);break;case"chooser_extras_changed":this.chooserExtras=e.params.chooserExtras}},e.prototype.getChooserExtras=function(){return this.chooserExtras},e}(z),H=function(o){function e(e){return o.call(this,e)||this}return n(e,o),e}(F),X=function(o){function e(e){var t=o.call(this,e)||this;return t.validateNoOptionLinkType(),t}return n(e,o),e.prototype.validateNoOptionLinkType=function(){if(void 0!==this.options.linkType)throw new Error("The ZoomChooser SDK does not accept a linkType.")},e.prototype.urlParams=function(){var e=o.prototype.urlParams.call(this);return e.push({key:"is_zoom_chooser",value:"true"}),e},e}(F),K=function(o){function e(e){var t,n,r;void 0===e&&(e={});var i=o.call(this,e)||this;return i.state={link:i.options.link,file_zoom:null===(t=i.options.file)||void 0===t?void 0:t.zoom,folder_view:null===(n=i.options.folder)||void 0===n?void 0:n.view,folder_headerSize:null===(r=i.options.folder)||void 0===r?void 0:r.headerSize},i}return n(e,o),e.prototype.urlPathname=function(){return"/dropins/embed"},e.prototype.urlParams=function(){return i(i(i(i([],this.state.link?[{key:"link",value:this.state.link}]:[],!0),this.state.file_zoom?[{key:"file_zoom",value:this.state.file_zoom}]:[],!0),this.state.folder_view?[{key:"folder_view",value:this.state.folder_view}]:[],!0),this.state.folder_headerSize?[{key:"folder_header_size",value:this.state.folder_headerSize}]:[],!0)},e.prototype.handleMessage=function(e){if("update_size"===e.method)this.options.onSizeChanged&&this.options.onSizeChanged(e.params);else o.prototype.handleMessage.call(this,e)},e}(z),G=function(o){function e(t){var n=o.call(this,t)||this;return e.validateOnSuccess(n.options.onSuccess),e.validateOnCancel(n.options.onCancel),n.state={entries:n.options.entries,initialFolderSelection:n.options.initialFolderSelection},n.onSuccess=n.options.onSuccess,n.onCancel=n.options.onCancel,n.setOnFolderSelected(n.options.onFolderSelected),n}return n(e,o),e.validateOnSuccess=function(o){if(o&&"function"!=typeof o)throw new Error("onSuccess must be a function")},e.validateOnCancel=function(o){if(o&&"function"!=typeof o)throw new Error("onCancel must be a function")},e.validateOnFolderSelected=function(o){if(o&&"function"!=typeof o)throw new Error("onFolderSelected must be a function")},e.prototype.urlParams=function(){var o=[{key:"account_id",value:this.options.accountId},{key:"initial_folder_selection",value:this.state.initialFolderSelection}];return this.options.showFoldersOnly&&o.push({key:"show_folders_only",value:"true"}),this.options.showSearchBar&&o.push({key:"show_search_bar",value:"true"}),o},e.prototype.urlPathname=function(){return"/dropins/mover"},e.prototype.handleMessage=function(e){switch(o.prototype.handleMessage.call(this,e),e.method){case"success":this.onSuccess&&this.onSuccess();break;case"cancel":this.onCancel&&this.onCancel();break;case"folder_selected":this.onFolderSelected&&this.onFolderSelected(e.params.path)}},e.prototype.setEntries=function(o){this.state=r(r({},this.state),{entries:o}),this.sendState()},e.prototype.setInitialFolderSelection=function(o){this.state=r(r({},this.state),{initialFolderSelection:o}),this.sendState()},e.prototype.setOnSuccess=function(o){e.validateOnSuccess(o),this.onSuccess=o},e.prototype.setOnCancel=function(o){e.validateOnCancel(o),this.onCancel=o},e.prototype.setOnFolderSelected=function(o){e.validateOnFolderSelected(o),this.onFolderSelected=o},e}(z),q=function(o){function e(e){void 0===e&&(e={});var t=o.call(this,e)||this;return t.state={accountId:t.options.accountId,hideAccount:t.options.hideAccount,link:t.options.link,cl:t.options.cl,view:t.options.initialView,openLinksWithSDK:!!t.options.onOpenLink},t}return n(e,o),e.prototype.urlPathname=function(){return"/dropins/previewer"},e.prototype.urlParams=function(){return i(i(i(i(i([],this.state.accountId?[{key:"account_id",value:this.state.accountId}]:[],!0),this.state.hideAccount?[{key:"hide_account",value:"true"}]:[],!0),this.state.view?[{key:"initial_view",value:this.state.view}]:[],!0),this.state.cl?[{key:"cl",value:this.state.cl}]:[],!0),this.state.link?[{key:"link",value:this.state.link}]:[],!0)},e.prototype.handleMessage=function(e){switch(e.method){case"view_change":var t=e.params.view;this.state=r(r({},this.state),{view:t}),this.options.onViewChange&&this.options.onViewChange(t);break;case"open_link":this.options.onOpenLink&&this.options.onOpenLink(e.params.link);break;case"open_login":this.options.onOpenLogin&&this.options.onOpenLogin();break;case"update_size":this.options.onSizeChanged&&this.options.onSizeChanged(e.params);break;default:o.prototype.handleMessage.call(this,e)}},e.prototype.setAccountId=function(o){this.state=r(r({},this.state),{accountId:o}),this.sendState()},e.prototype.setHideAccount=function(o){this.state=r(r({},this.state),{hideAccount:o}),this.sendState()},e.prototype.setLink=function(o){this.state=r(r({},this.state),{link:o}),this.sendState()},e.prototype.setView=function(o){this.state=r(r({},this.state),{view:o}),this.sendState()},e}(z);!function(){$(),Dropbox.VERSION="2";var o=new P;Dropbox.mount=o.mount.bind(o),Dropbox.openWindow=o.openWindow.bind(o);var e=o.remove.bind(o);Dropbox.unmount=e,Dropbox.closeWindow=e,Dropbox.Mover=G,Dropbox.Previewer=q,Dropbox.Chooser=H,Dropbox.ZoomChooser=X,Dropbox.embed=function(o,e){Dropbox.appKey&&(o=r(r({},o),{appKey:Dropbox.appKey}));var t=new K(o);return Dropbox.mount(t,e),t},B.init=function(){for(var o=document.getElementsByTagName("a"),e=o.length-1;e>=0;e--){var t=o[e],n=(t.getAttribute("class")||"").split(" ");n.indexOf("dropbox-saver")>=0?function(o){Dropbox.createSaveButton({files:function(){return[{url:o.getAttribute("data-url")||o.href,filename:o.getAttribute("data-filename")||U(o.pathname)}]}},o)}(t):n.indexOf("dropbox-embed")>=0&&function(o){var e=o.getAttribute("data-url")||o.href;if(e&&o.parentElement){var t=o.getAttribute("data-file-zoom")||void 0,n=o.getAttribute("data-folder-view")||void 0,r=o.getAttribute("data-folder-header-size")||void 0,i=document.createElement("div");i.classList.add("dropbox-embed-container"),i.style.height=o.getAttribute("data-height")||"100%",i.style.width=o.getAttribute("data-width")||"100%",o.parentElement.replaceChild(i,o),Dropbox.embed({link:e,file:{zoom:t},folder:{view:n,headerSize:r}},i)}}(t)}}}();var Y=window.Dropbox;window.Dropbox=e.Dropbox})();
//# sourceMappingURL=dropins_sdk_v2.js.map